shared:
  compute:
    type: vm-fleet
  database:
    type: postgres
  bucket:
    type: s3

workloads:
  fresh-todo-app:
    variables:
      DATABASE_URL: "${shared.database.outputs.connection_string}"
      DB_HOST: "${shared.database.outputs.hostname}"
      DB_PORT: "${shared.database.outputs.port}"
      DB_NAME: "${shared.database.outputs.database}"
      DB_USER: "${shared.database.outputs.username}"
      DB_PASSWORD: "${shared.database.outputs.password}"
      LOAD_BALANCER_URL: "http://${shared.compute.outputs.loadbalancer_ip}"
      AWS_S3_BUCKET: "${shared.bucket.outputs.bucket_name}"
      AWS_REGION: "${shared.bucket.outputs.region}"
      S3_BUCKET_ARN: "${shared.bucket.outputs.bucket_arn}"